---
title: "Mapping COVID-19 Cases in Oregon"
author: "Zach"
date: "2020-04-27"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Session Overview

This week, Kelsey spent some time mapping the COVID-19 cases in Oregon and generated some plots for us.  She already has provided some most 
illustrative documentation for her code, so I will simply attempt to augment what she has already done.

In this post, we will be covering the following subjects:

* Subsetting the full dataset to obtain only the Oregon cases
* Dividing the Oregon data into 10-day intervals for analysis
* Generating a 2-dimensional density plot (heatmap) of the confirmed cases in Oregon


As always, if you'd like to download the code and run it yourself, [**check it out on github**](https://github.com/H4estu/COVID19-Data-Exploration/blob/master/scripts/R/session3/covid_heat_map.R).



## Subsetting the data

First of all, we need to set up the environment in which we will be conducting our computations and analysis.  This
includes importing the appropriate libraries and connecting to the database from where we will pull the COVID-19 data.  I have
moved the code that connects to the database to a separate file and wrapped it in a function call so that sensitive information
such as the database username and password are protected.  Contact me if you need help setting up your own database configuration
script.  Finally, recall that if you want to run this code, *you must be connected to the VPN*.
```{r initialize, eval=FALSE}
library(data.table)
library(magrittr)
library(dplyr)
library(ggplot2)
library(stringr)
library(RPostgreSQL)
library(maps)
library(RColorBrewer)
library(gridExtra)


git.path <- Sys.getenv('HOME')  # Where the base COVID19-Data-Exploration folder lives.

# -------- Access the COVID-19 Database --------- #
source(file.path(git.path,'Code/config_files/db_config.R'))
con <- db_connect.fn()
full.dt<-dbGetQuery(con,'SELECT * FROM covid_data.report_data') %>% data.table
dbDisconnect(con)  
# ----------------------------------------------- #

```

```{r subsetting}
```